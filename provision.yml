---
- name: Configure passwordless sudo
  hosts: infra
  gather_facts: yes
  become: yes
  tasks:
  
    - name: Configure passwordless sudo
      ansible.builtin.lineinfile:
        path: /etc/sudoers
        state: present
        regexp: '^%wheel'
        line: '%wheel        ALL=(ALL)       NOPASSWD: ALL'
        validate: /usr/sbin/visudo -cf %s

- name: Configure Gluster on the HDD hosts
  hosts: hdd
  gather_facts: yes
  become: yes
  tasks:
  
    - name: Gluster provision role
      ansible.builtin.include_role:
        name: gluster
      
- name: Configure Gluster on the NVMe hosts
  hosts: nvme
  gather_facts: yes
  become: yes
  tasks:

    - name: Gluster provision role
      ansible.builtin.include_role:
        name: gluster
  


